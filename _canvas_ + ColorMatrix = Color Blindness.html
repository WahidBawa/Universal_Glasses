<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0084)http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/ -->
<html xmlns="http://www.w3.org/1999/xhtml" class="gr__web_archive_org"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script src="./_canvas_ + ColorMatrix = Color Blindness_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app101.us.archive.org';v.server_ms=392;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/ait-client-rewrite.js" charset="utf-8"></script>
<script type="text/javascript">
WB_wombat_Init('http://web.archive.org/web', '20081014161121', 'www.colorjack.com:80');
</script>
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/wbhack.js" charset="utf-8"></script>
<script type="text/javascript">
__wbhack.init('http://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="./_canvas_ + ColorMatrix = Color Blindness_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./_canvas_ + ColorMatrix = Color Blindness_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

 <title>&lt;canvas&gt; + ColorMatrix = Color Blindness</title>
 <link href="./_canvas_ + ColorMatrix = Color Blindness_files/blind.css" rel="stylesheet" type="text/css">
 <script src="./_canvas_ + ColorMatrix = Color Blindness_files/global.js" type="text/javascript"></script>
 <script src="./_canvas_ + ColorMatrix = Color Blindness_files/color.js" type="text/javascript"></script>
 <script src="./_canvas_ + ColorMatrix = Color Blindness_files/color_blind.js" type="text/javascript"></script>
 <script src="./_canvas_ + ColorMatrix = Color Blindness_files/gui_menu.js" type="text/javascript"></script>
 <script src="./_canvas_ + ColorMatrix = Color Blindness_files/matrix.js" type="text/javascript"></script>
</head>
<body data-gr-c-s-loaded="true"><div id="wm-ipp" lang="en" style="display: block; direction: ltr;">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="http://web.archive.org/web/" title="Wayback Machine home page"><img src="./_canvas_ + ColorMatrix = Color Blindness_files/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/#" onclick="__wm.saveSnapshot(&#39;http://www.colorjack.com/labs/colormatrix/&#39;, &#39;20081014161121&#39;)" title="Share via My Web Archive" id="wm-save-snapshot-open" style="display: none;">
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in" style="display: inline-block;">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web" style="display: none;"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/#" onclick="window.open(&#39;https://www.facebook.com/sharer/sharer.php?u=http://web.archive.org/web/20081014161121/http://www.colorjack.com:80/labs/colormatrix/&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/#" onclick="window.open(&#39;https://twitter.com/intent/tweet?text=http://web.archive.org/web/20081014161121/http://www.colorjack.com:80/labs/colormatrix/&amp;via=internetarchive&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="http://web.archive.org/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.colorjack.com/labs/colormatrix/" onfocus="this.focus();this.select();" autocomplete="off"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20081014161121"><input type="submit" value="Go"></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20080913204136/http://www.colorjack.com:80/labs/colormatrix/" title="13 Sep 2008"><strong>Sep</strong></a></td>
		  <td class="c" id="displayMonthEl" title="You are here: 16:11:21 Oct 14, 2008">OCT</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20081207033549/http://www.colorjack.com:80/labs/colormatrix/" title="07 Dec 2008"><strong>Dec</strong></a></td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20080913204136/http://www.colorjack.com:80/labs/colormatrix/" title="20:41:36 Sep 13, 2008"><img src="./_canvas_ + ColorMatrix = Color Blindness_files/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0"></a></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 16:11:21 Oct 14, 2008">14</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20081207033549/http://www.colorjack.com:80/labs/colormatrix/" title="03:35:49 Dec 07, 2008"><img src="./_canvas_ + ColorMatrix = Color Blindness_files/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"></a></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2007</td>
		  <td class="c" id="displayYearEl" title="You are here: 16:11:21 Oct 14, 2008">2008</td>
		  <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20091214100135/http://www.colorjack.com:80/labs/colormatrix/" title="14 Dec 2009"><strong>2009</strong></a></td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures"><a class="t" href="http://web.archive.org/web/*/http://www.colorjack.com/labs/colormatrix/" title="See a list of every capture for this URL">84 captures</a><div class="r" title="Timespan for captures of this URL">22 Apr 2008 - 23 Apr 2018</div></div>
	  </td>
	  <td class="k">
	    <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="575" height="27" border="0"></canvas>
	      <div class="yt" style="display: none; width: 25px; height: 27px;"></div><div class="mt" style="display: none; width: 2px; height: 27px;"></div></div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/colormatrix/#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/51_crawl)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/51_crawl" target="_new"><span class="wm-title">51_crawl</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  this data is currently not publicly accessible.
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="./_canvas_ + ColorMatrix = Color Blindness_files/loading.gif" alt="loading"></div>
    </div>
  </div></div></div></div><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/timestamp.js" charset="utf-8"></script>
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/graph-calc.js" charset="utf-8"></script>
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/auto-complete.js" charset="utf-8"></script>
<script type="text/javascript" src="./_canvas_ + ColorMatrix = Color Blindness_files/toolbar.js" charset="utf-8"></script>
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<script type="text/javascript">
__wm.bt(575,27,25,2,"web","http://www.colorjack.com/labs/colormatrix/","2008-10-14",1996);
</script><div class="wb-autocomplete-suggestions "></div>
<!-- END WAYBACK TOOLBAR INSERT -->
<div id="top" class="noSelect">
 <div class="right">
 <div class="west">
  <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/"><img src="./_canvas_ + ColorMatrix = Color Blindness_files/logo.gif" style="position: absolute; top: -9px; left: 29px; border: 0;"></a>
 </div>
 <div class="east">
  <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/software/"><div>software</div></a>
  <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/sphere/"><div>sphere</div></a>
  <a href="http://web.archive.org/web/20081014161121/http://www.colorjack.com/labs/galaxy/"><div>galaxy</div></a>
 </div>
 </div>
</div>
<div style="height: 305px; width: 760px; padding: 20px; background: url(&#39;http://web.archive.org/web/20081014161121im_/http://www.colorjack.com/software/pattern/media/bg.png&#39;) 0 -200px;">
 <div id="menu"></div>
 <canvas id="canvas_a" width="1" height="1" onmousedown="core.fu(this.id, event, {fu:core.win})" style="position: absolute; top: 55px; left: 30px">&gt;</canvas>
 <canvas id="canvas_c" width="1" height="1" onmousedown="core.fu(this.id, event, {fu:core.win})" style="position: absolute; left: 260px; top: 55px;"></canvas>
 <canvas id="shape"></canvas>
 <div style="position: absolute; left: 500px; top: 50px; line-height: 1.3em; font-size: 40px; color: #eee">
  <span>Color</span>
  <span style="display:block; padding-left: 30px; color: #aaa">Blindness</span>
  <span style="display:block; padding-left: 60px; color: #7a7a7a">Simulation</span>
  <span style="display:block; font-size: 22px; color: #A8F4CE">and introducing…</span>
  <span style="display:block; font-size: 22px; line-height: 30px; padding-left: 30px; color: #A8F4CE">&lt;<a href="http://web.archive.org/web/20081014161121/http://en.wikipedia.org/wiki/Canvas_(HTML_element)" style="color: #A8F4CE">canvas</a>&gt; ColorMatrix!</span>
 </div>
</div>
<div id="T" style="width: 760px; padding: 20px; background: #fff; line-height: 1.3em;">

Introducing the Javascript <a href="http://web.archive.org/web/20081014161121/http://www.nofunc.com/Color_Matrix_Library/">Color Matrix Library</a>. It’s a very simple example of the most basic ColorMatrix formulas — partially inspired by Quasimondo’s wonderful <a href="http://web.archive.org/web/20081014161121/http://www.quasimondo.com/archives/000565.php">Flash 8 ColorMatrix Class</a>. Today, we’ll be combining the <a href="http://web.archive.org/web/20081014161121/http://www.nofunc.com/Color_Matrix_Library/">Color Blindness</a> library along with a &lt;canvas&gt; implementation of ColorMatrix. So now, just like in Actionscript, you can apply photoshop-like filters to &lt;canvas&gt;.<br><br>

Requires &lt;canvas&gt; getImageData() &amp; putImageData() support — Firefox (2.0+), Opera (9.5+), and Webkit.<br><br>

<b>How to simulate color blindness (for accessibility)</b><br><br>

The most obvious way would be to do the calculations in CIE XYZ using confusion lines, however, &lt;canvas&gt; uses RGB. So you’d have to convert from XYZ to RGB, run the confusion lines, then convert back to RGB. Here’s an example of what that looks like: <a href="http://web.archive.org/web/20081014161121/http://www.nofunc.com/Color_Blindness_Library/">Color Blindness Library</a> — It’s great for running on a few colors, but too slow for larger images.<br><br>

Matrix’s are generally about as quick as you’re going to get for generic color filters, so that’s what I’ve converted the formulas into – compliant with Actionscript’s ColorMatrix, and other programming languages that use standard RGBA matrix’s. Also, I’ve converted them into color transform’s which are useful in Actionscript (ColorTransform), Pixelmator (Image... Channel Mixer), and Photoshop (Image... Adjustments... Channel Mixer).<br><br>

I used data generated by Matthew Wickline’s formulas to base my blindness library. My script triangulates the hue by comparing the un-filtered, completely saturated, RGB values with the same value after they’d been run through Wickline’s formula. The code can be viewed in this .html’s source!<br><br>

Want to use these blindness filters in Photoshop, or Pixelmator? Use these values in Channel Mixer:<br><br>

<pre style="margin-bottom: 25px">{Normal:{ R:[100, 0, 0], G:[0, 100, 0], B:[0, 100, 0]},
 Protanopia:{ R:[56.667, 43.333, 0], G:[55.833, 44.167, 0], B:[0, 24.167, 75.833]},
 Protanomaly:{ R:[81.667, 18.333, 0], G:[33.333, 66.667, 0], B:[0, 12.5, 87.5]},
 Deuteranopia:{ R:[62.5, 37.5, 0], G:[70, 30, 0], B:[0, 30, 70]},
 Deuteranomaly:{ R:[80, 20, 0], G:[25.833, 74.167, 0], B:[0, 14.167, 85.833]},
 Tritanopia:{ R:[95, 5, 0], G:[0, 43.333, 56.667], B:[0, 47.5, 52.5]},
 Tritanomaly:{ R:[96.667, 3.333, 0], G:[0, 73.333, 26.667], B:[0, 18.333, 81.667]},
 Achromatopsia:{ R:[29.9, 58.7, 11.4], G:[29.9, 58.7, 11.4], B:[29.9, 58.7, 11.4]},
 Achromatomaly:{ R:[61.8, 32, 6.2], G:[16.3, 77.5, 6.2], B:[16.3, 32.0, 51.6]}
</pre>

<b>Let’s take Protanopia for example:</b><br><br>

The values are: { R:[56.667, 43.333, 0], G:[55.833, 44.167, 0], B:[0, 24.167, 75.833]}<br><br>

‘R’, ‘G’, and ‘B’ contain array’s of the corresponding Red, Green, and Blue values for each Channel.<br><br>

So, for the Red Channel we’d shift the Red Value up 56.667% (from the default position), and Green we’d shift up 43.333%… and since the last value is zero, we don’t change the Blue Value.<br><br>

Ok, so now just do the same thing for the Green and Blue channels, and you’re set!<br><br>

<b>Alright, so how does a ColorMatrix work?</b><br>
<pre style="width: 780px; overflow: hidden;">ColorMatrix=function(o,m) { // takes: RGBA object, Matrix array

    function fu(n) { return(n&lt;0?0:(n&lt;255?n:255)); }

    var r=((o.R*m[0])+(o.G*m[1])+(o.B*m[2])+(o.A*m[3])+m[4]);
    var g=((o.R*m[5])+(o.G*m[6])+(o.B*m[7])+(o.A*m[8])+m[9]);
    var b=((o.R*m[10])+(o.G*m[11])+(o.B*m[12])+(o.A*m[13])+m[14]);
    var a=((o.R*m[15])+(o.G*m[16])+(o.B*m[17])+(o.A*m[18])+m[19]);
    
    return({'R':fu(r), 'G':fu(g), 'B':fu(b), 'A':fu(a)});
    
};

Blind=function(v) { // this function just returns the Matrix

    return({'Normal':[1,0,0,0,0, 0,1,0,0,0, 0,0,1,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Protanopia':[0.567,0.433,0,0,0, 0.558,0.442,0,0,0, 0,0.242,0.758,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Protanomaly':[0.817,0.183,0,0,0, 0.333,0.667,0,0,0, 0,0.125,0.875,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Deuteranopia':[0.625,0.375,0,0,0, 0.7,0.3,0,0,0, 0,0.3,0.7,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Deuteranomaly':[0.8,0.2,0,0,0, 0.258,0.742,0,0,0, 0,0.142,0.858,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Tritanopia':[0.95,0.05,0,0,0, 0,0.433,0.567,0,0, 0,0.475,0.525,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Tritanomaly':[0.967,0.033,0,0,0, 0,0.733,0.267,0,0, 0,0.183,0.817,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Achromatopsia':[0.299,0.587,0.114,0,0, 0.299,0.587,0.114,0,0, 0.299,0.587,0.114,0,0, 0,0,0,1,0, 0,0,0,0,1],
            'Achromatomaly':[0.618,0.320,0.062,0,0, 0.163,0.775,0.062,0,0, 0.163,0.320,0.516,0,0,0,0,0,1,0,0,0,0,0]}[v]);

};

/* Here we are calling the function */

ColorMatrix({R:255, G:0, B:0}, Blind['Tritanopia']);
</pre>

<b>Suggestions, and Conclusion</b><br><br>

That’s basically the function you’d use to apply a ColorMatrix filter on a red pixel. You’d want to make a few optimizations (feel free to look at the source code for this demo, which has a few optimization in place).<br><br>

If you have any thoughts on the matter, leave your <a href="http://web.archive.org/web/20081014161121/http://colorjack.blogspot.com/2008/04/color-blindness-simulation_19.html">comment here</a>.

</div>
<script type="text/javascript">

/* CANVAS */

var co={}

co.gc=function(c,v) { c.globalCompositeOperation=v; }
co.copy=function(a,b) { $2D(b).drawImage($(a),0,0,400,400); }

/* BLINDNESS */

function round(n) { return(Math.round(n*1000)/1000); }

blind_r=function() { // Hue Triangulation
    
    function prev(n) { return((n>=0)?0:Math.abs(n)); }
    function self(n) { return((n>=0)?100-n:100+n); }
    function next(n) { return((n>=0)?n:0); }

    function fu(r,v) { return(color.RGB_HSV(fBlind[C](r)).H); };

    function offset(v,n) { var r, g, b;
    
        if(v=='R') { r=self(n); g=next(n); b=prev(n); }

        else if(v=='G') { r=prev(n); g=self(n); b=next(n); }

        else if(v=='B') { r=next(n); g=prev(n); b=self(n); }
    
        return(""+round(r/100)+","+round(g/100)+","+round(b/100)+',0,0');
    
    }
    
    for(var i in fBlind) {
    
        var C=i, A={r:fu({'R':255, 'G':0, 'B':0, 'A':1}), g:fu({'R':0, 'G':255, 'B':0, 'A':1}), b:fu({'R':0, 'G':0, 'B':255, 'A':1})};
        
        TEST("<br>'"+i+"':["+offset('R',(A.r/120)*100)+', '+offset('G',((A.g-120)/120)*100)+', '+offset('B',((A.b-240)/120)*100)+', 0,0,0,1,0, 0,0,0,0,1],',1);

    };

/*

 Upload a picture, or video's (or grab one from flickr)

 1) Drop-down menu with Color Blindness modes in it
 2) Histogram of the image, to compare with various modes
 3) Color Channel Mixer (create customalies, or view current Matrix)
 4) Open/Import/Save/Export

*/

};


/* ONLOAD */

var $data, $w, $h;

window.onload=function() {

    menu.init({'blind':'Normal'});

    var r=['Normal','Protanopia','Protanomaly','Deuteranopia','Deuteranomaly','Tritanopia','Tritanomaly','Achromatopsia','Achromatomaly'], z={};
    
    for(var i in r) { i=r[i];

        z[i]=new Function('',"setColorMatrix(_cMatrix.Blind('"+i+"')); ColorMatrix($2D('canvas_a').getImageData(0,0,$w,$h),$w,$h);");

    };

    $('menu').innerHTML=menu.build('blind',z);
    
    image=new Image;

    image.src='media/scale.jpg'; image.onload=function() {

        var o=$('canvas_a'), w=image.width, h=image.height;

        with(o) { width=w; height=h; }

        with($('canvas_c')) { width=w; height=h; }

        var c=$2D(o); c.drawImage(image, 0,0, w, h); $w=w; $h=h;
        
        $2D('canvas_c').drawImage(image, 0,0, w, h);
        
		$C('menuBox','blind_opt')[0].opened=true;
		
		menu.toggle($T('li','blind_opt')[6]);
        
    };
    
//    blind_r();

};

</script>

<script src="./_canvas_ + ColorMatrix = Color Blindness_files/urchin.js" type="text/javascript"></script>
<script type="text/javascript"> _uacct="UA-400768-4"; urchinTracker(); </script>

<!--
playback timings (ms):
  LoadShardBlock: 292.317 (3)
  esindex: 0.01
  captures_list: 314.98
  CDXLines.iter: 16.76 (3)
  PetaboxLoader3.datanode: 218.162 (4)
  exclusion.robots: 0.384
  exclusion.robots.policy: 0.368
  RedisCDXSource: 1.718
  PetaboxLoader3.resolve: 71.021 (3)
  load_resource: 56.843
--></body></html>